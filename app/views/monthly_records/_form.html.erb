<!-- app/views/monthly_records/_form.html.erb -->
<%= form_with(model: monthly_record, local: true) do |f| %>
  <% if monthly_record.errors.any? %>
    <div class="alert alert-danger">
      <strong><%= pluralize(monthly_record.errors.count, "error") %>:</strong>
      <ul class="mb-0">
        <% monthly_record.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="card mb-3">
    <div class="card-body row g-3">
      <div class="col-md-3">
        <%= f.label :period, "Mes", class: "form-label" %>
        <!-- HTML5 month (YYYY-MM). En el controlador lo convertimos a Date dÃ­a 1 -->
        <%= f.month_field :period, value: monthly_record.period_ym, class: "form-control", required: true %>
      </div>

      <% [:nomina, :hh, :dp, :actp, :astp, :iap,
          :acreditacion, :salud, :recepcion, :tiempo,
          :soplado, :uso_jetin, :servicios, :despacho].each do |attr| %>
        <div class="col-md-2">
          <%= f.label attr, attr.to_s.humanize, class: "form-label" %>
          <%= f.number_field attr, class: "form-control", min: 0, step: 1, required: true %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="d-flex gap-2">
    <%= f.submit class: "btn btn-primary" %>
    <%= link_to "Volver", monthly_records_path, class: "btn btn-outline-secondary" %>
  </div>
<% end %>
